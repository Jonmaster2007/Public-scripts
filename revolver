
-- Player outlines script 2
-- Player outlines: darker & solid at <=100 HP
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

local localPlayer = Players.LocalPlayer
local excludedPlayers: { [Player]: true } = {}
local outlinesEnabled = true
local shiftDown, ctrlDown = false, false

-- how dark outlines get when <=100 HP
local darkenFactor = 0.5

local function getTeamColor()
    local firstTeam = nil
    for _, player in Players:GetPlayers() do
        if player.Team then
            if not firstTeam then
                firstTeam = player.Team.TeamColor
            elseif firstTeam ~= player.Team.TeamColor then
                return nil
            end
        end
    end
    return Color3.fromRGB(0, 185, 45)
end

local function darkenColor(color: Color3, factor: number): Color3
    return Color3.new(color.R * factor, color.G * factor, color.B * factor)
end

local function applyOutlines()
    local sameTeamColor = getTeamColor()

    for _, player in Players:GetPlayers() do
        if player ~= localPlayer and player.Character then
            local character = player.Character
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local highlight = character:FindFirstChildOfClass("Highlight") or Instance.new("Highlight")
            highlight.Adornee = character
            highlight.Parent = character
            highlight.FillTransparency = 1

            local baseColor
            local outlineTransparency = 0.2

            if excludedPlayers[player] then
                baseColor = Color3.fromRGB(0, 145, 250)
            else
                baseColor = sameTeamColor or (player.Team and player.Team.TeamColor.Color or Color3.fromRGB(255, 255, 255))
            end

            -- Darken & make solid if HP <= 100
            if humanoid and humanoid.Health <= 100 then
                baseColor = darkenColor(baseColor, darkenFactor)
                outlineTransparency = 0
            end

            highlight.OutlineColor = baseColor
            highlight.OutlineTransparency = outlineTransparency
        end
    end
end

local function getClosestPlayerToMouse(): Player?
    local mouseLocation = UserInputService:GetMouseLocation()
    local closest: Player? = nil
    local shortestDist = math.huge

    for _, player in Players:GetPlayers() do
        if player ~= localPlayer and player.Character then
            local head = player.Character:FindFirstChild("Head")
            if head then
                local pos, onScreen = Camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local dist = (Vector2.new(pos.X, pos.Y) - mouseLocation).Magnitude
                    if dist < shortestDist then
                        shortestDist = dist
                        closest = player
                    end
                end
            end
        end
    end

    return closest
end

UserInputService.InputBegan:Connect(function(input, processed)
    if input.UserInputType ~= Enum.UserInputType.Keyboard then return end

    shiftDown = UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
    ctrlDown = UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) or UserInputService:IsKeyDown(Enum.KeyCode.RightControl)

    if ctrlDown and not shiftDown then
        if input.KeyCode == Enum.KeyCode.LeftBracket then
            local target = getClosestPlayerToMouse()
            if target then
                excludedPlayers[target] = not excludedPlayers[target]
            end
        elseif input.KeyCode == Enum.KeyCode.RightBracket then
            excludedPlayers = {}
            for _, player in Players:GetPlayers() do
                if player.Character then
                    local highlight = player.Character:FindFirstChildOfClass("Highlight")
                    if highlight then
                        highlight:Destroy()
                    end
                end
            end
            outlinesEnabled = not outlinesEnabled
        end
    elseif shiftDown and not ctrlDown then
        if input.KeyCode == Enum.KeyCode.P then
            outlinesEnabled = not outlinesEnabled
        end
    end
end)

task.spawn(function()
    while true do
        task.wait(0.5)
        if outlinesEnabled then
            applyOutlines()
        else
            for _, player in Players:GetPlayers() do
                if player.Character then
                    local highlight = player.Character:FindFirstChildOfClass("Highlight")
                    if highlight then
                        highlight:Destroy()
                    end
                end
            end
        end
    end
end)




local v0=_G.JALON_AIMCONFIG or {Enabled=true,KeyActivation=Enum.KeyCode.X,FOV=1377,TeamCheck=true,DistanceCheck=true,VisibleCheck=true,Smoothness=0,Prediction={Enabled=false,Value=0.185},aimPartTarget="Head",ForceLancerTorso=true} ;_G.JALON_AIMCONFIG=_G.JALON_AIMCONFIG or v0 ;local v1=game:GetService("UserInputService");local v2=game:GetService("Players");local v3=game:GetService("RunService");local v4=game:GetService("Workspace");local v5=v4.CurrentCamera;local v6=v2.LocalPlayer;local v7,v8=Drawing.new("Circle"),Drawing.new("Square");local v9;local v10=false;local v11=true;local v12,v13=false,false;local v14=true;local function v15(v89) local v90=v89.Character;local v91=v90 and v90:FindFirstChildWhichIsA("Humanoid") ;local v92=v90 and v90:FindFirstChild(v0.aimPartTarget) ;local v93= not v0.TeamCheck or (v89.Team~=v6.Team) ;return (v89~=v6) and v93 and v90 and v91 and (v91.Health>0) and  not v89.Character:FindFirstChildWhichIsA("ForceField") ,v92;end local function v16(v94) return Vector3.new(v94.X,math.clamp(v94.Y * 0.5 , -5,10),v94.Z);end local function v17(v95) local v96={v4:FindFirstChild("empire_team"),v4:FindFirstChild("nation_team")};for v190,v191 in ipairs(v96) do if (v191 and v191:IsA("Folder")) then local v222=v191:FindFirstChild(v95.Name);if (v222 and v222:FindFirstChild("invuln_helm")) then return true;end end end return false;end local function v18(v97) local v98={v4:FindFirstChild("empire_team"),v4:FindFirstChild("nation_team")};for v192,v193 in ipairs(v98) do if (v193 and v193:IsA("Folder")) then local v223=v193:FindFirstChild(v97.Name);if (v223 and v223:FindFirstChild("helmet")) then return true;end end end return false;end local function v19(v99) return v99.CFrame + (v16(v99.Velocity) * v0.Prediction.Value) ;end local function v20(v100) local v101=v100.Character;if  not v101 then return nil;end local v102=v101:FindFirstChildOfClass("Humanoid");local v103=v17(v100);local v104=v18(v100);local v105=v101:FindFirstChild("Head");local v106=v101:FindFirstChild("Torso") or v101:FindFirstChild("UpperTorso") ;if (v0.aimPartTarget=="Torso") then if v0.ForceLancerTorso then if ( not v104 and  not v103) then return v105 or v106 ;else return v106 or v105 ;end else return v106 or v105 ;end end if (v0.aimPartTarget=="Head") then if (v0.ForceLancerTorso and v103) then return v106 or v105 ;elseif (v14 and v104 and v102 and (v102.Health<=100)) then return v106 or v105 ;else return v105;end end return v105;end local function v21() if (v10 and v9) then return v9;end local v107={aimPart=nil,center_dist=math.huge};for v194,v195 in v2:GetPlayers() do local v196=select(1,v15(v195));if v196 then local v224=v20(v195);if v224 then local v231,v232=v5:WorldToViewportPoint(v224.Position);local v233=Vector2.new(v5.ViewportSize.X/2 ,v5.ViewportSize.Y/2 );local v234=(v233-Vector2.new(v231.X,v231.Y)).Magnitude;if ((v234<=v0.FOV) and ( not v0.VisibleCheck or v232)) then if (v234<v107.center_dist) then v107.aimPart=v224;v107.center_dist=v234;end end end end end return (v107.aimPart and v107) or nil ;end v8.Color=Color3.fromRGB(0,185,35);v8.Filled=true;v8.Size=Vector2.new(15,15);v8.Thickness=20;v8.Transparency=0.4;v7.Color=Color3.fromRGB(0,144,255);v7.Thickness=2;v7.Transparency=0.6;v7.Visible=true;v1.InputBegan:Connect(function(v108,v109) if (v108.UserInputType~=Enum.UserInputType.Keyboard) then return;end v12=v1:IsKeyDown(Enum.KeyCode.LeftShift) or v1:IsKeyDown(Enum.KeyCode.RightShift) ;v13=v1:IsKeyDown(Enum.KeyCode.LeftControl) or v1:IsKeyDown(Enum.KeyCode.RightControl) ;if (v12 and  not v13) then if (v108.KeyCode==Enum.KeyCode.RightBracket) then v0.TeamCheck= not v0.TeamCheck;elseif (v108.KeyCode==Enum.KeyCode.LeftBracket) then v0.aimPartTarget=((v0.aimPartTarget=="Head") and "Torso") or "Head" ;elseif (v108.KeyCode==Enum.KeyCode.P) then v11= not v11;elseif (v108.KeyCode==Enum.KeyCode.L) then v14= not v14;v9=v21();end end if (v13 and  not v12) then if (v108.KeyCode==Enum.KeyCode.P) then v0.ForceLancerTorso= not v0.ForceLancerTorso;v9=v21();elseif (v108.KeyCode==Enum.KeyCode.L) then v0.Smoothness=((v0.Smoothness==0) and 0.4) or 0 ;end end if (v108.KeyCode==v0.KeyActivation) then v10=true;v9=v21();end end);v1.InputEnded:Connect(function(v110,v111) if (v110.KeyCode==v0.KeyActivation) then v10=false;v9=nil;end end);v3.PreSimulation:Connect(function() if  not v10 then v9=v21();elseif (v9 and v9.aimPart) then local v228=v2:FindFirstChild(v9.aimPart.Parent.Name);if (v228 and v0.ForceLancerTorso) then local v237=v20(v228);if (v237 and (v237~=v9.aimPart)) then v9.aimPart=v237;end end end v7.Radius=v0.FOV;v7.Position=Vector2.new(v5.ViewportSize.X/2 ,v5.ViewportSize.Y/2 );if (v9 and v9.aimPart) then local v207,v208=v5:WorldToViewportPoint(v9.aimPart.Position);v8.Color=Color3.fromRGB(0,185,35);v8.Visible=v208 and v11 ;v8.Position=Vector2.new(v207.X,v207.Y) -(v8.Size/2) ;if (v1:IsKeyDown(v0.KeyActivation) and v10) then local v229=(v0.Prediction.Enabled and v19(v9.aimPart)) or v9.aimPart ;local v230=CFrame.lookAt(v5.CFrame.Position,v229.Position);if (v0.Smoothness>0) then v5.CFrame=v5.CFrame:Lerp(v230,v0.Smoothness);else v5.CFrame=v230;end end else v8.Visible=false;v8.Position=Vector2.zero;end end);local v31=game:GetService("UserInputService");local v32=game:GetService("Workspace");local function v33(v115,v116) if  not v115 then return nil;end local v117=string.lower(v116);for v197,v198 in ipairs(v115:GetChildren()) do if (string.lower(v198.Name)==v117) then return v198;end end return nil;end local function v34() local v118=v33(v32,"serverStuff");if  not v118 then return;end local v119={{"empire_spawnroom","empire_spawnprot"},{"nation_spawnroom","nation_spawnprot"},{"empire_spawnroom","earlygameblocker"},{"nation_spawnroom","earlygameblocker"}};for v199,v200 in ipairs(v119) do local v201=v118;for v215,v216 in ipairs(v200) do v201=v33(v201,v216);if  not v201 then break;end end if v201 then v201:Destroy();end end end v31.InputBegan:Connect(function(v120,v121) if (v120.UserInputType~=Enum.UserInputType.Keyboard) then return;end local v122=v31:IsKeyDown(Enum.KeyCode.LeftShift) or v31:IsKeyDown(Enum.KeyCode.RightShift) ;local v123=v31:IsKeyDown(Enum.KeyCode.LeftControl) or v31:IsKeyDown(Enum.KeyCode.RightControl) ;if (v123 and v122 and (v120.KeyCode==Enum.KeyCode.BackSlash)) then task.spawn(v34);end end);local v31=game:GetService("UserInputService");local v35=Instance.new("ScreenGui");v35.Parent=game.CoreGui;v35.Enabled=false;local v39=Instance.new("Frame");v39.Size=UDim2.new(0,270,0,530);v39.Position=UDim2.new(1, -280,0, -10);v39.BackgroundColor3=Color3.fromRGB(30,30,30);v39.BorderSizePixel=2;v39.BorderColor3=Color3.fromRGB(0,145,250);v39.Parent=v35;local v46=Instance.new("TextLabel");v46.RichText=true;v46.Text=[[
<font color="rgb(0,185,45)">Keybinds for revamped Grave Diggers Script!</font>
<p><font color="rgb(0,185,45)">Hold X</font> <font color="rgb(120,175,255)">for aimlock</font></p>
<p><font color="rgb(0,185,45)">Shift + [</font> <font color="rgb(120,175,255)">switches part from head to torso</font></p>
<p><font color="rgb(0,185,45)">Shift + ]</font> <font color="rgb(120,175,255)">toggles teamcheck (ON by default)</font></p>
<p><font color="rgb(0,185,45)">Ctrl + [</font> <font color="rgb(120,175,255)">makes selected player's outlines blue</font></p>
<p><font color="rgb(0,185,45)">Ctrl + ]</font> <font color="rgb(120,175,255)">toggles the outline loop</font></p>
<p><font color="rgb(0,185,45)">Ctrl + P</font> <font color="rgb(120,175,255)">toggles aimlock to lock onto torso of players with unbreakable helmets ON by default (if enabled will always target torso of lancer players cause their helmets are indestructible.)</font></p>
<p><font color="rgb(0,185,45)">Ctrl + P</font> <font color="rgb(120,175,255)">and if the aim part is torso it forces aimlock to aim on head if they don't have a helmet ON by default (if enabled will always target torso of lancer players cause their helmets are indestructible.)</font></p>
<p><font color="rgb(0,185,45)">Shift + P</font> <font color="rgb(120,175,255)">toggles outlines and targetbox</font></p>
<p><font color="rgb(0,185,45)">Ctrl + Shift + \</font> <font color="rgb(120,175,255)">deletes spawn barriers (blatant)</font></p>
<p><font color="rgb(0,185,45)">Ctrl + L</font> <font color="rgb(120,175,255)">toggles aimlock smoothness</font></p>
<p><font color="rgb(0,185,45)">Shift + L</font> <font color="rgb(120,175,255)">Makes the Aimlock target player's torso's if they are under 100 health (Only works if aimlock part is set to Head).</font></p>
<p><font color="rgb(0,185,45)">Ctrl + Shift + L</font> <font color="rgb(120,175,255)">opens tpwalk speed UI</font></p>
<p><font color="rgb(0,185,45)">Ctrl + Shift + P</font> <font color="rgb(120,175,255)">toggles tpwalking (ON by default)</font></p>
<p><font color="rgb(0,185,45)">Shift + Y</font> <font color="rgb(120,175,255)">toggles Keybinds UI</font></p>
]];v46.Size=UDim2.new(1,0,0,505);v46.Position=UDim2.new(0,0,0,5);v46.BackgroundTransparency=1;v46.TextColor3=Color3.fromRGB(120,175,255);v46.TextWrapped=true;v46.TextScaled=false;v46.Font=Enum.Font.SourceSansBold;v46.TextSize=17;v46.Parent=v39;local v59=Instance.new("TextLabel");v59.Text="Created by Jonmaster1";v59.Size=UDim2.new(1,0,0,30);v59.Position=UDim2.new(0,0,0,490);v59.BackgroundTransparency=1;v59.TextColor3=Color3.fromRGB(0,185,45);v59.TextScaled=false;v59.Font=Enum.Font.SourceSansBold;v59.TextSize=27;v59.Parent=v39;local v69,v70,v71,v72;v39.InputBegan:Connect(function(v124) if (v124.UserInputType==Enum.UserInputType.MouseButton1) then v69=true;v71=v124.Position;v72=v39.Position;v124.Changed:Connect(function() if (v124.UserInputState==Enum.UserInputState.End) then v69=false;end end);end end);v39.InputChanged:Connect(function(v125) if (v125.UserInputType==Enum.UserInputType.MouseMovement) then v70=v125;end end);v31.InputChanged:Connect(function(v126) if ((v126==v70) and v69) then local v219=v126.Position-v71 ;v39.Position=UDim2.new(v72.X.Scale,v72.X.Offset + v219.X ,v72.Y.Scale,v72.Y.Offset + v219.Y );end end);v31.InputBegan:Connect(function(v127,v128) if v128 then return;end if ((v127.KeyCode==Enum.KeyCode.Y) and v31:IsKeyDown(Enum.KeyCode.LeftShift) and  not v31:IsKeyDown(Enum.KeyCode.LeftControl)) then v35.Enabled= not v35.Enabled;end end);loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))();game.StarterGui:SetCore("SendNotification",{Title="Shift + Y",Text="For Keybinds UI.",Icon="",Duration=5});local v31=game:GetService("UserInputService");local v73=game:GetService("RunService");local v74=game:GetService("Players");local v6=v74.LocalPlayer;local v75=v6.Character or v6.CharacterAdded:Wait() ;local v76=v75:FindFirstChildWhichIsA("Humanoid");local v77=true;local v78=0.21;local v79=false;local v35,v80,v81,v82;local function v83() v77=true;local v129=v6.Character;local v130=v129 and v129:FindFirstChildWhichIsA("Humanoid") ;while v77 and v129 and v130 and v130.Parent  do local v202=v73.Heartbeat:Wait();if (v130.MoveDirection.Magnitude>0) then v129:TranslateBy(v130.MoveDirection * v78 * v202 * 10 );end end end local function v84() v77=false;end local function v85() if v77 then v84();else v83();end end local function v86(v131) v75=v131;v76=v75:FindFirstChildWhichIsA("Humanoid");if v77 then task.wait(1);v83();end end v6.CharacterAdded:Connect(v86);local function v87() if v35 then return;end local v132=game:GetService("CoreGui");local v133=v132:FindFirstChild("TpWalkSpeedGui");if v133 then v133:Destroy();end v35=Instance.new("ScreenGui");v35.Name="TpWalkSpeedGui";v35.Parent=v132;v35.IgnoreGuiInset=true;v35.ZIndexBehavior=Enum.ZIndexBehavior.Global;v35.DisplayOrder=999999;v35.ResetOnSpawn=false;v80=Instance.new("Frame");v80.Size=UDim2.new(0,230,0,150);v80.Position=UDim2.new(0.5, -115,0.5, -75);v80.BackgroundColor3=Color3.fromRGB(40,40,45);v80.BorderSizePixel=0;v80.ZIndex=10;v80.Parent=v35;local v147=Instance.new("UICorner");v147.CornerRadius=UDim.new(0,10);v147.Parent=v80;local v150=Instance.new("TextLabel");v150.Size=UDim2.new(1,0,0.2,0);v150.Position=UDim2.new(0,0,0,5);v150.Text="Change Speed";v150.TextColor3=Color3.fromRGB(0,145,250);v150.BackgroundTransparency=1;v150.Font=Enum.Font.GothamBold;v150.TextSize=18;v150.ZIndex=11;v150.Parent=v80;v81=Instance.new("TextBox");v81.Size=UDim2.new(0.8,0,0.3,0);v81.Position=UDim2.new(0.1,0,0.3,0);v81.PlaceholderText="Enter speed";v81.Text=tostring(v78);v81.BackgroundColor3=Color3.fromRGB(60,60,70);v81.TextColor3=Color3.new(1,1,1);v81.Font=Enum.Font.Gotham;v81.TextSize=14;v81.ClearTextOnFocus=true;v81.ZIndex=11;v81.Parent=v80;local v173=Instance.new("UICorner");v173.CornerRadius=UDim.new(0,6);v173.Parent=v81;v81:GetPropertyChangedSignal("Text"):Connect(function() local v203=v81.Text;v203=v203:gsub("[^%d.]","");local v204=select(2,v203:gsub("%.",""));if (v204>1) then v203=v203:sub(1, #v203-1 );end v81.Text=v203;end);v81.FocusLost:Connect(function() if ((v81.Text=="") or (v81.Text==".")) then v81.Text=tostring(v78);end end);v82=Instance.new("TextButton");v82.Size=UDim2.new(0.8,0,0.3,0);v82.Position=UDim2.new(0.1,0,0.65,0);v82.Text="Confirm";v82.Font=Enum.Font.GothamBold;v82.TextColor3=Color3.new(1,1,1);v82.TextSize=16;v82.BackgroundColor3=Color3.fromRGB(80,120,255);v82.ZIndex=11;v82.Parent=v80;local v185=Instance.new("UICorner");v185.CornerRadius=UDim.new(0,8);v185.Parent=v82;v82.MouseButton1Click:Connect(function() local v206=tonumber(v81.Text);if (v206 and (v206>0)) then v78=v206;end v35:Destroy();v35=nil;v79=false;end);end local function v88() v79= not v79;if v79 then v87();elseif v35 then v35:Destroy();v35=nil;end end v31.InputBegan:Connect(function(v188,v189) if v189 then return;end if ((v188.KeyCode==Enum.KeyCode.P) and v31:IsKeyDown(Enum.KeyCode.LeftControl) and v31:IsKeyDown(Enum.KeyCode.LeftShift)) then v85();elseif ((v188.KeyCode==Enum.KeyCode.L) and v31:IsKeyDown(Enum.KeyCode.LeftControl) and v31:IsKeyDown(Enum.KeyCode.LeftShift)) then v88();end end);v83();
